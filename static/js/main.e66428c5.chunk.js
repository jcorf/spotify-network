(this["webpackJsonpspotify-network"]=this["webpackJsonpspotify-network"]||[]).push([[0],{20:function(t,e,s){},21:function(t,e,s){},22:function(t,e,s){},25:function(t,e,s){"use strict";s.r(e);var a=s(1),n=s.n(a),i=s(11),c=s.n(i),r=(s(20),s(12)),o=s(13),l=s(15),d=s(14),h=s(6),u=["user-top-read","user-read-recently-played"],m=window.location.hash.substring(1).split("&").reduce((function(t,e){if(e){var s=e.split("=");t[s[0]]=decodeURIComponent(s[1])}return t}),{});window.location.hash="";var b=m,j=(s(21),s.p+"static/media/logo.6ce24c58.svg"),f=s(9),p=s(8),g=s(10),_=(s.p,s.p,s(22),s(23),s(0)),y=function(t){Object(l.a)(s,t);var e=Object(d.a)(s);function s(){var t;return Object(r.a)(this,s),(t=e.call(this)).state={token:null,artist_ID:"",artist_Name:"",albums:[{artists:[{name:""}]},{name:""},{id:""},{name:""}],tracks:[{artists:[{name:""},{id:""}]},{name:""}],all_songs:[],all_artists:[],all_ids:[],recent_artist_id:"",temp:"",starting_artist:"",count:0,no_data:!1,shared_images:[],connections:[],mount:0},t}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var t=b.access_token;t&&this.setState({token:t,mount:0})}},{key:"componentDidUpdate",value:function(t,e,s){0==this.state.mount&&(this.getUserRecentlyPlayed(this.state.token),this.getAlbums(this.state.token,this.state.recent_artist_id))}},{key:"getUserRecentlyPlayed",value:function(t){var e=this;h.ajax({url:"https://api.spotify.com/v1/me/player/recently-played?limit=1",type:"GET",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t)},success:function(t){t?e.setState({recent_artist_id:t.items[0].track.artists[0].id,no_data:!1}):e.setState({no_data:!0})}})}},{key:"changeArtist",value:function(t){this.setState({albums:[{artists:[{name:""},{id:""}]},{name:""},{id:""},{images:[{url:""}]}],tracks:[{artists:[{name:""},{id:""}]},{name:""}],all_songs:[],all_artists:[],all_ids:[],count:this.state.count+1,shared_images:[]}),this.getAlbums(this.state.token,t)}},{key:"getTracksOfAlbum",value:function(t,e,s){var a=this;h.ajax({url:"https://api.spotify.com/v1/albums/"+e+"/tracks",type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t)},success:function(t){t?(a.setState({tracks:t.items,no_data:!1}),a.state.tracks.map((function(t){return a.setState({all_songs:a.state.all_songs.concat(t)})})),a.state.tracks.map((function(t){t.artists.map((function(e){if(!a.state.all_ids.includes(e.id)){var n=[e.id,s,t.name,t.external_urls.spotify];a.setState({shared_images:a.state.shared_images.concat(n)}),a.setState({all_artists:a.state.all_artists.concat(e)}),a.setState({all_ids:a.state.all_ids.concat(e.id)})}}))}))):a.setState({no_data:!0})}})}},{key:"getAlbums",value:function(t,e){var s=this;h.ajax({url:"https://api.spotify.com/v1/artists/"+e+"/albums/?offset=0&limit=50&include_groups=album,single&market=US",type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t)},success:function(a){a?(s.setState({mount:1}),s.setState({albums:a.items,artist_Id:e,all_ids:[e],no_data:!1}),s.state.albums.map((function(e){e.images.length?s.getTracksOfAlbum(t,e.id,e.images[0].url,e.name):s.getTracksOfAlbum(t,e.id,j,e.name)})),0==s.state.count?s.setState({starting_artist:s.state.albums[0].artists[0].name}):s.setState({connections:s.state.connections.concat(s.state.albums[0].artists[0].name)})):s.setState({no_data:!0})}})}},{key:"render",value:function(){var t=this;return Object(_.jsx)("div",{className:"App",children:Object(_.jsxs)("header",{className:"App-header",children:[!this.state.token&&Object(_.jsxs)("div",{className:"homepage",children:[Object(_.jsx)("h1",{className:"header",children:"Spotify Discovery Network"}),Object(_.jsx)("a",{href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("74074a35e175406aa61bf5f33b3d0c14","&redirect_uri=").concat("http://localhost:3000","&scope=").concat(u.join("%20"),"&response_type=token&show_dialog=true"),children:Object(_.jsx)("button",{className:"button",children:"Login to Spotify"})}),Object(_.jsxs)("h6",{className:"made",children:[" See the network of artists from a recently played Artist by you! ",Object(_.jsx)("br",{})," Look for new music or Challenge yourself to find another artist in minimal connections."]}),Object(_.jsx)("h6",{className:"made",children:" Made at HackBeanpot 2021 using Spotify API"})]}),0==this.state.count&&this.state.all_ids.length>=1&&Object(_.jsxs)("h1",{className:"heading",children:["You recently played: ",this.state.albums[0].artists[0].name]}),this.state.token&&!this.state.no_data&&Object(_.jsx)("div",{children:Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{children:[this.state.count>=1&&this.state.albums.length>0&&Object(_.jsxs)("h1",{className:"heading",children:["Artist: ",this.state.albums[0].artists[0].name]}),Object(_.jsxs)("h3",{children:[this.state.count," connections away from ",this.state.starting_artist]}),Object(_.jsxs)("h4",{className:"connection",children:["  ",this.state.connections.map((function(t){return t+" > "}))]})]}),Object(_.jsx)(p.a,{fluid:!0,true:!0,children:Object(_.jsx)(f.a,{className:"row",children:this.state.all_artists.map((function(e){return Object(_.jsx)(g.a,{xs:"3",children:Object(_.jsxs)("div",{children:[Object(_.jsx)("a",{target:"_blank",href:t.state.shared_images[t.state.shared_images.indexOf(e.id)+3],children:Object(_.jsx)("img",{variant:"top",className:"circle",src:t.state.shared_images[t.state.shared_images.indexOf(e.id)+1]})}),Object(_.jsxs)("h3",{className:"text",children:["   ",Object(_.jsxs)("button",{className:"button",onClick:function(){return t.changeArtist(e.id)},hover:e.id,children:[e.name," "]},e.id)]}),Object(_.jsx)("p",{className:"text",children:Object(_.jsxs)("i",{children:[" ",t.state.shared_images[t.state.shared_images.indexOf(e.id)+2]," "]})})]})})}))})})]})}),1==this.state.all_ids.length&&this.state.albums.length>0&&Object(_.jsx)("h3",{children:" This artist hasn't collaborated with anyone :( "})]})})}}]),s}(n.a.Component),x=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,26)).then((function(e){var s=e.getCLS,a=e.getFID,n=e.getFCP,i=e.getLCP,c=e.getTTFB;s(t),a(t),n(t),i(t),c(t)}))};c.a.render(Object(_.jsx)(n.a.StrictMode,{children:Object(_.jsx)(y,{})}),document.getElementById("root")),x()}},[[25,1,2]]]);
//# sourceMappingURL=main.e66428c5.chunk.js.map